<html>
	<head>
		<title>分场景渲染</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
        <!--本网页主要是 分场景渲染加载-->
		<script src="../../three.js"></script>
		<script src="../../OrbitControls.js"></script>
		<script>
            var color = 0x000000;

            // Create your main scene
            var scene = new THREE.Scene();

            // Create your main camera
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            scene.add(camera);
            // Create lights
            var light = new THREE.PointLight(0xEEEEEE);
            light.position.set(20, 0, 20);
            scene.add(light);

            var lightAmb = new THREE.AmbientLight(0x777777);
            scene.add(lightAmb);


            const axesHelper = new THREE.AxesHelper( 5 );
			scene.add( axesHelper );

            // Create your renderer
            renderer = new THREE.WebGLRenderer({
                alpha: true,
                antialias: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // Create a cube
            var geometry = new THREE.BoxGeometry(1, 1, 1);
            var material = new THREE.MeshLambertMaterial({
                color: 0xff00ff,
                ambient: 0x121212,
                emissive: 0x121212
            });

            var cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            // Set up the main camera
            camera.position.z = 5;

            // Load the background texture
            var texture = THREE.ImageUtils.loadTexture("../grass.jpg");
            var backgroundMesh = new THREE.Mesh(
                new THREE.PlaneGeometry(2, 2, 0),
                new THREE.MeshBasicMaterial({
                    map: texture
                }));

            backgroundMesh.material.depthTest = false;
            backgroundMesh.material.depthWrite = false;

            // Create your background scene
            var backgroundScene = new THREE.Scene();
            //var backgroundCamera = new THREE.Camera();
            var backgroundCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            backgroundCamera.position.z = 1;
            backgroundScene.add(backgroundCamera);
            backgroundScene.add(backgroundMesh);

            // Rendering function
            var render = function() {
                requestAnimationFrame(render);

                // Update the color to set
                if (color < 0xdddddd) color += 0x0000ff;

                // Update the cube color
                cube.material.color.setHex(color);

                // Update the cube rotations
                cube.rotation.x += 0.005;
                cube.rotation.y += 0.002;

                controls.update(); 

                renderer.autoClear = false;
                renderer.clear();
                //renderer.render(scene, camera);
                renderer.render(backgroundScene, camera);
                renderer.render(scene, camera);

            };
            var controls = new THREE.OrbitControls(camera,renderer.domElement);//创建控件对象
            render();

        </script>
	</body>
</html>